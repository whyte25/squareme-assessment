import {
  PaginationMetadata,
  Transaction,
  TransactionsQueryParams,
} from "@/types";

const transactions: Transaction[] = [
  {
    id: "1",
    amount: "N43,644",
    transaction_id: "TR_8401857902",
    transaction_type: "Transfer",
    date: "Feb 12, 2025",
    time: "10:30AM",
    status: "Processed",
    createdAt: "2025-02-12T10:30:00Z",
  },
  {
    id: "2",
    amount: "N35,471",
    transaction_id: "TR_8401857902",
    transaction_type: "Withdrawal",
    date: "Feb 12, 2025",
    time: "10:30AM",
    status: "Failed",
    createdAt: "2025-02-12T10:30:00Z",
  },
  {
    id: "3",
    amount: "N43,644",
    transaction_id: "TR_8401857902",
    transaction_type: "Deposit",
    date: "Feb 12, 2025",
    time: "10:30AM",
    status: "Processed",
    createdAt: "2025-02-12T10:30:00Z",
  },
  {
    id: "4",
    amount: "N35,471",
    transaction_id: "TR_8401857902",
    transaction_type: "Request",
    date: "Feb 12, 2025",
    time: "10:30AM",
    status: "Failed",
    createdAt: "2025-02-12T10:30:00Z",
  },
  {
    id: "5",
    amount: "N43,644",
    transaction_id: "TR_8401857902",
    transaction_type: "Transfer",
    date: "Feb 12, 2025",
    time: "10:30AM",
    status: "Processed",
    createdAt: "2025-02-12T10:30:00Z",
  },
  {
    id: "6",
    amount: "N35,471",
    transaction_id: "TR_8401857902",
    transaction_type: "Transfer",
    date: "Feb 12, 2025",
    time: "10:30AM",
    status: "Failed",
    createdAt: "2025-02-12T10:30:00Z",
  },
  {
    id: "7",
    amount: "N38,948",
    transaction_id: "TR_8401857902",
    transaction_type: "Transfer",
    date: "Feb 12, 2025",
    time: "10:30AM",
    status: "Processed",
    createdAt: "2025-02-12T10:30:00Z",
  },

  {
    id: "8",
    amount: "N50,000",
    transaction_id: "TR_8401857903",
    transaction_type: "Deposit",
    date: "Feb 13, 2025",
    time: "11:45AM",
    status: "Processed",
    createdAt: "2025-02-13T11:45:00Z",
  },
  {
    id: "9",
    amount: "N22,500",
    transaction_id: "TR_8401857904",
    transaction_type: "Withdrawal",
    date: "Feb 14, 2025",
    time: "09:15AM",
    status: "Processed",
    createdAt: "2025-02-14T09:15:00Z",
  },
  {
    id: "10",
    amount: "N75,320",
    transaction_id: "TR_8401857905",
    transaction_type: "Transfer",
    date: "Feb 15, 2025",
    time: "14:20PM",
    status: "Failed",
    createdAt: "2025-02-15T14:20:00Z",
  },
  {
    id: "11",
    amount: "N18,750",
    transaction_id: "TR_8401857906",
    transaction_type: "Request",
    date: "Feb 16, 2025",
    time: "16:05PM",
    status: "Failed",
    createdAt: "2025-02-16T16:05:00Z",
  },
  {
    id: "12",
    amount: "N63,400",
    transaction_id: "TR_8401857907",
    transaction_type: "Deposit",
    date: "Feb 17, 2025",
    time: "13:10PM",
    status: "Processed",
    createdAt: "2025-02-17T13:10:00Z",
  },
  {
    id: "13",
    amount: "N28,750",
    transaction_id: "TR_8401857908",
    transaction_type: "Transfer",
    date: "Feb 18, 2025",
    time: "09:25AM",
    status: "Processed",
    createdAt: "2025-02-18T09:25:00Z",
  },
  {
    id: "14",
    amount: "N42,100",
    transaction_id: "TR_8401857909",
    transaction_type: "Withdrawal",
    date: "Feb 19, 2025",
    time: "15:40PM",
    status: "Failed",
    createdAt: "2025-02-19T15:40:00Z",
  },
  {
    id: "15",
    amount: "N55,800",
    transaction_id: "TR_8401857910",
    transaction_type: "Deposit",
    date: "Feb 20, 2025",
    time: "12:15PM",
    status: "Processed",
    createdAt: "2025-02-20T12:15:00Z",
  },
  {
    id: "16",
    amount: "N31,250",
    transaction_id: "TR_8401857911",
    transaction_type: "Request",
    date: "Feb 21, 2025",
    time: "10:50AM",
    status: "Processed",
    createdAt: "2025-02-21T10:50:00Z",
  },
  {
    id: "17",
    amount: "N47,900",
    transaction_id: "TR_8401857912",
    transaction_type: "Transfer",
    date: "Feb 22, 2025",
    time: "14:35PM",
    status: "Failed",
    createdAt: "2025-02-22T14:35:00Z",
  },
  {
    id: "18",
    amount: "N19,450",
    transaction_id: "TR_8401857913",
    transaction_type: "Withdrawal",
    date: "Feb 23, 2025",
    time: "11:20AM",
    status: "Processed",
    createdAt: "2025-02-23T11:20:00Z",
  },
  {
    id: "19",
    amount: "N68,300",
    transaction_id: "TR_8401857914",
    transaction_type: "Deposit",
    date: "Feb 24, 2025",
    time: "16:45PM",
    status: "Processed",
    createdAt: "2025-02-24T16:45:00Z",
  },
  {
    id: "20",
    amount: "N24,600",
    transaction_id: "TR_8401857915",
    transaction_type: "Request",
    date: "Feb 25, 2025",
    time: "09:30AM",
    status: "Failed",
    createdAt: "2025-02-25T09:30:00Z",
  },
  {
    id: "21",
    amount: "N52,750",
    transaction_id: "TR_8401857916",
    transaction_type: "Transfer",
    date: "Feb 26, 2025",
    time: "13:55PM",
    status: "Processed",
    createdAt: "2025-02-26T13:55:00Z",
  },
  {
    id: "22",
    amount: "N37,200",
    transaction_id: "TR_8401857917",
    transaction_type: "Withdrawal",
    date: "Feb 27, 2025",
    time: "10:15AM",
    status: "Failed",
    createdAt: "2025-02-27T10:15:00Z",
  },
  {
    id: "23",
    amount: "N61,850",
    transaction_id: "TR_8401857918",
    transaction_type: "Deposit",
    date: "Feb 28, 2025",
    time: "15:30PM",
    status: "Processed",
    createdAt: "2025-02-28T15:30:00Z",
  },
  {
    id: "24",
    amount: "N45,200",
    transaction_id: "TR_8401857919",
    transaction_type: "Transfer",
    date: "Mar 1, 2025",
    time: "09:15AM",
    status: "Processed",
    createdAt: "2025-03-01T09:15:00Z",
  },
  {
    id: "25",
    amount: "N33,750",
    transaction_id: "TR_8401857920",
    transaction_type: "Withdrawal",
    date: "Mar 2, 2025",
    time: "14:30PM",
    status: "Failed",
    createdAt: "2025-03-02T14:30:00Z",
  },
  {
    id: "26",
    amount: "N58,900",
    transaction_id: "TR_8401857921",
    transaction_type: "Deposit",
    date: "Mar 3, 2025",
    time: "11:45AM",
    status: "Processed",
    createdAt: "2025-03-03T11:45:00Z",
  },
  {
    id: "27",
    amount: "N27,300",
    transaction_id: "TR_8401857922",
    transaction_type: "Request",
    date: "Mar 4, 2025",
    time: "16:20PM",
    status: "Failed",
    createdAt: "2025-03-04T16:20:00Z",
  },
  {
    id: "28",
    amount: "N49,600",
    transaction_id: "TR_8401857923",
    transaction_type: "Transfer",
    date: "Mar 5, 2025",
    time: "10:35AM",
    status: "Processed",
    createdAt: "2025-03-05T10:35:00Z",
  },
  {
    id: "29",
    amount: "N36,150",
    transaction_id: "TR_8401857924",
    transaction_type: "Withdrawal",
    date: "Mar 6, 2025",
    time: "13:50PM",
    status: "Failed",
    createdAt: "2025-03-06T13:50:00Z",
  },
  {
    id: "30",
    amount: "N64,800",
    transaction_id: "TR_8401857925",
    transaction_type: "Deposit",
    date: "Mar 7, 2025",
    time: "15:25PM",
    status: "Processed",
    createdAt: "2025-03-07T15:25:00Z",
  },
  {
    id: "31",
    amount: "N29,450",
    transaction_id: "TR_8401857926",
    transaction_type: "Request",
    date: "Mar 8, 2025",
    time: "09:40AM",
    status: "Failed",
    createdAt: "2025-03-08T09:40:00Z",
  },
  {
    id: "32",
    amount: "N53,700",
    transaction_id: "TR_8401857927",
    transaction_type: "Transfer",
    date: "Mar 9, 2025",
    time: "12:05PM",
    status: "Processed",
    createdAt: "2025-03-09T12:05:00Z",
  },
  {
    id: "33",
    amount: "N38,250",
    transaction_id: "TR_8401857928",
    transaction_type: "Withdrawal",
    date: "Mar 10, 2025",
    time: "14:45PM",
    status: "Failed",
    createdAt: "2025-03-10T14:45:00Z",
  },
  {
    id: "34",
    amount: "N71,900",
    transaction_id: "TR_8401857929",
    transaction_type: "Deposit",
    date: "Mar 11, 2025",
    time: "11:15AM",
    status: "Processed",
    createdAt: "2025-03-11T11:15:00Z",
  },
  {
    id: "35",
    amount: "N67,850",
    transaction_id: "TR_8401857930",
    transaction_type: "Deposit",
    date: "Mar 12, 2025",
    time: "12:55PM",
    status: "Processed",
    createdAt: "2025-03-12T12:55:00Z",
  },
  {
    id: "36",
    amount: "N23,200",
    transaction_id: "TR_8401857931",
    transaction_type: "Request",
    date: "Mar 13, 2025",
    time: "10:10AM",
    status: "Failed",
    createdAt: "2025-03-13T10:10:00Z",
  },
  {
    id: "37",
    amount: "N51,450",
    transaction_id: "TR_8401857932",
    transaction_type: "Transfer",
    date: "Mar 14, 2025",
    time: "15:45PM",
    status: "Processed",
    createdAt: "2025-03-14T15:45:00Z",
  },
  {
    id: "38",
    amount: "N34,700",
    transaction_id: "TR_8401857933",
    transaction_type: "Withdrawal",
    date: "Mar 15, 2025",
    time: "11:30AM",
    status: "Failed",
    createdAt: "2025-03-15T11:30:00Z",
  },
  {
    id: "39",
    amount: "N59,950",
    transaction_id: "TR_8401857934",
    transaction_type: "Deposit",
    date: "Mar 16, 2025",
    time: "14:15PM",
    status: "Processed",
    createdAt: "2025-03-16T14:15:00Z",
  },
  {
    id: "40",
    amount: "N25,300",
    transaction_id: "TR_8401857935",
    transaction_type: "Request",
    date: "Mar 17, 2025",
    time: "09:35AM",
    status: "Processed",
    createdAt: "2025-03-17T09:35:00Z",
  },
  {
    id: "41",
    amount: "N48,650",
    transaction_id: "TR_8401857936",
    transaction_type: "Transfer",
    date: "Mar 18, 2025",
    time: "16:50PM",
    status: "Failed",
    createdAt: "2025-03-18T16:50:00Z",
  },
  {
    id: "42",
    amount: "N32,900",
    transaction_id: "TR_8401857937",
    transaction_type: "Withdrawal",
    date: "Mar 19, 2025",
    time: "13:05PM",
    status: "Processed",
    createdAt: "2025-03-19T13:05:00Z",
  },
  {
    id: "43",
    amount: "N56,150",
    transaction_id: "TR_8401857938",
    transaction_type: "Deposit",
    date: "Mar 20, 2025",
    time: "10:20AM",
    status: "Processed",
    createdAt: "2025-03-20T10:20:00Z",
  },
  {
    id: "44",
    amount: "N28,400",
    transaction_id: "TR_8401857939",
    transaction_type: "Request",
    date: "Mar 21, 2025",
    time: "15:35PM",
    status: "Failed",
    createdAt: "2025-03-21T15:35:00Z",
  },
  {
    id: "45",
    amount: "N54,750",
    transaction_id: "TR_8401857940",
    transaction_type: "Transfer",
    date: "Mar 22, 2025",
    time: "11:50AM",
    status: "Processed",
    createdAt: "2025-03-22T11:50:00Z",
  },
  {
    id: "46",
    amount: "N37,100",
    transaction_id: "TR_8401857941",
    transaction_type: "Withdrawal",
    date: "Mar 23, 2025",
    time: "14:40PM",
    status: "Failed",
    createdAt: "2025-03-23T14:40:00Z",
  },
  {
    id: "47",
    amount: "N62,350",
    transaction_id: "TR_8401857942",
    transaction_type: "Deposit",
    date: "Mar 24, 2025",
    time: "09:55AM",
    status: "Processed",
    createdAt: "2025-03-24T09:55:00Z",
  },
  {
    id: "48",
    amount: "N26,600",
    transaction_id: "TR_8401857943",
    transaction_type: "Request",
    date: "Mar 25, 2025",
    time: "16:10PM",
    status: "Processed",
    createdAt: "2025-03-25T16:10:00Z",
  },
  {
    id: "49",
    amount: "N47,850",
    transaction_id: "TR_8401857944",
    transaction_type: "Transfer",
    date: "Mar 26, 2025",
    time: "12:25PM",
    status: "Failed",
    createdAt: "2025-03-26T12:25:00Z",
  },
  {
    id: "50",
    amount: "N33,100",
    transaction_id: "TR_8401857945",
    transaction_type: "Withdrawal",
    date: "Mar 27, 2025",
    time: "10:40AM",
    status: "Processed",
    createdAt: "2025-03-27T10:40:00Z",
  },
];

export const deleteTransactions = (transactionIds: string[]) => {
  const transactionsToDelete = transactions.filter((transaction) =>
    transactionIds.includes(transaction.id),
  );

  const initialLength = transactions.length;

  const indexesToRemove: number[] = [];
  transactions.forEach((transaction, index) => {
    if (transactionIds.includes(transaction.id)) {
      indexesToRemove.push(index);
    }
  });

  for (let i = indexesToRemove.length - 1; i >= 0; i--) {
    transactions.splice(indexesToRemove[i], 1);
  }

  const deletedCount = initialLength - transactions.length;

  return {
    status: true,
    message: "Transactions deleted successfully",
    data: {
      deleted_count: deletedCount,
      deleted_transactions: transactionsToDelete,
    },
  };
};

export const getPaginatedTransactions = (params: TransactionsQueryParams) => {
  const { page = 1, limit = 10, from_date, to_date } = params;

  let filteredTransactions = [...transactions];

  if (from_date && to_date) {
    const fromDate = new Date(from_date);
    const toDate = new Date(to_date);

    filteredTransactions = filteredTransactions.filter((transaction) => {
      const transactionDate = new Date(transaction.createdAt);
      return transactionDate >= fromDate && transactionDate <= toDate;
    });
  }

  const totalItems = filteredTransactions.length;
  const totalPages = Math.ceil(totalItems / limit);
  const startIndex = (page - 1) * limit;
  const endIndex = startIndex + limit;
  const paginatedTransactions = filteredTransactions.slice(
    startIndex,
    endIndex,
  );

  const pagination: PaginationMetadata = {
    total_items: totalItems,
    total_pages: totalPages,
    items_per_page: limit,
    current_page: page,
    next_page: page < totalPages ? page + 1 : null,
    prev_page: page > 1 ? page - 1 : null,
  };

  return {
    status: true,
    message: "Transactions fetched successfully",
    data: {
      transactions: paginatedTransactions,
      pagination,
    },
  };
};
